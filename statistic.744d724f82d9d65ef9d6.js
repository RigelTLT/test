(()=>{"use strict";const e=e=>({Authorization:`Bearer ${e}`,Accept:"application/json","Content-Type":"application/json"});class t{get token(){return JSON.parse(localStorage.getItem("token"))}get id(){return JSON.parse(localStorage.getItem("id"))}get name(){return JSON.parse(localStorage.getItem("name"))}get refreshToken(){return JSON.parse(localStorage.getItem("refreshToken"))}}(new class{async start(){const r=new t;if(r.id){const{optional:t}=await async function(t,r){return await fetch(`https://react-learnwords-2022.herokuapp.com/users/${t}/statistics`,{method:"GET",headers:e(r)}).then((e=>e.json())).catch((e=>console.log(e.message)))}(r.id,r.token),n=document.querySelector(".sprint"),o=document.querySelector(".audio-call");this.fillHTML(n,o,t)}else{const e=document.querySelector(".game-statistic"),t=document.createElement("h3");t.classList.add("authorize"),t.textContent="Чтобы увидеть раздел статистики необходимо войти в свой аккаунт",e.innerHTML="",e?.append(t)}}fillHTML(e,t,r){const{audioCall:n,sprint:o}=r,s=e?.querySelector(".new-word span"),c=e?.querySelector(".percent-currect span"),a=e?.querySelector(".longest-series span");s.textContent=o.learnedWord.length.toString();const l=o.correctAnswersPercent.reduce((function(e,t){return e+t}),0)/o.correctAnswersPercent.length;c.textContent=`${l?l.toFixed(2):0} %`,a.textContent=o.longestSeriesCorrect.toString();const i=t?.querySelector(".new-word span"),u=t?.querySelector(".percent-currect span"),g=t?.querySelector(".longest-series span");i.textContent=n.learnedWord.length.toString();const d=n.correctAnswersPercent.reduce((function(e,t){return e+t}),0)/n.correctAnswersPercent.length;u.textContent=`${d?d.toFixed(2):0} %`,g.textContent=n.longestSeriesCorrect.toString()}}).start()})();