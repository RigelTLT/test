(()=>{"use strict";var e={472:(e,t,n)=>{n.d(t,{C8:()=>d,PR:()=>i,QT:()=>o,ax:()=>s});var a=n(957);async function o(e){let t={email:"",password:""};e&&(t=e);const n=await fetch(`${a.FH}${a.ET.signin}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});return n.ok?await n.json():n.status}async function s(e,t){return await fetch(`${a.FH}${a.ET.users}/${e}/${a.ET.tokens}`,{method:"GET",headers:(0,a.A)(t)}).then((e=>e.json())).catch((e=>console.log(e.message)))}async function i(e,t){return await fetch(`${a.FH}${a.ET.users}/${e}`,{method:"GET",headers:(0,a.A)(t)}).then((e=>e.json())).catch((e=>console.log(e.message)))}async function d(e){const t=await fetch(`${a.FH}${a.ET.users}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t){const e=await t.json();return t.ok?e:e.error.errors[0].message}}},957:(e,t,n)=>{n.d(t,{A:()=>s,ET:()=>o,FH:()=>a,nn:()=>d,qz:()=>i});const a="https://react-learnwords-2022.herokuapp.com/",o={words:"words",users:"users",aggregatedWords:"aggregatedWords",statistics:"statistics",settings:"settings",signin:"signin",tokens:"tokens"},s=e=>({Authorization:`Bearer ${e}`,Accept:"application/json","Content-Type":"application/json"});async function i(e){const t=await fetch(`${a}${o.words}?group=${e.group}&page=${e.page}`);return await t.json()}async function d(e){const t=await fetch(`${a}${o.words}/${e}`);return await t.json()}},579:(e,t,n)=>{n.d(t,{D4:()=>d,Um:()=>c,Y4:()=>s,k8:()=>o,nl:()=>i});var a=n(957);async function o(e,t){return await fetch(`${a.FH}${a.ET.users}/${e}/words`,{method:"GET",headers:(0,a.A)(t)}).then((e=>e.json())).catch((e=>console.log(e.message)))}async function s(e,t,n){return await fetch(`${a.FH}${a.ET.users}/${e}/words/${t}`,{method:"GET",headers:(0,a.A)(n)}).then((e=>e.json())).catch((e=>console.log(e.message)))}async function i({id:e,idWord:t,token:n,body:o}){return await fetch(`${a.FH}${a.ET.users}/${e}/words/${t}`,{method:"POST",headers:(0,a.A)(n),body:JSON.stringify(o)}).then((e=>e.json())).catch((e=>console.log(e.message)))}async function d({id:e,idWord:t,token:n,body:o}){return await fetch(`${a.FH}${a.ET.users}/${e}/words/${t}`,{method:"PUT",headers:(0,a.A)(n),body:JSON.stringify(o)}).then((e=>e.json())).catch((e=>console.log(e.message)))}async function c(e,t,n){return await fetch(`${a.FH}${a.ET.users}/${e}/words/${t}`,{method:"DELETE",headers:(0,a.A)(n)}).then((e=>e.json())).catch((e=>console.log(e.message)))}},671:(e,t,n)=>{n.d(t,{BF:()=>i,cU:()=>c,jL:()=>o,l9:()=>d,ni:()=>s});var a=n(472);async function o(e){const t=document.querySelector(".account__text"),n=document.querySelector(".account");n.classList.contains("account")&&(n.classList.remove("account"),n.classList.add("account__out")),await async function(e,t,n){if(!await(0,a.PR)(e,t)){const t=await(0,a.ax)(e,n);t&&(localStorage.setItem("token",JSON.stringify(t.token)),localStorage.setItem("refreshToken",JSON.stringify(t.refreshToken)))}}(e.id,e.token,e.refreshToken),t.innerHTML=`${e.name}/Log Out`}function s(){localStorage.removeItem("id"),localStorage.removeItem("token"),localStorage.removeItem("name"),location.reload()}async function i(e){const t=await(0,a.QT)(e);if("number"==typeof t){const e=document.querySelector(".menu__text");404===t&&(e.innerHTML="Такой почты не существует!"),403===t&&(e.innerHTML="Неправильный адрес электронной почты или пароль!"),e.style.color="red",e.style.fontSize="x-large"}else n=t.userId,s=t.token,i=t.name,d=t.refreshToken,localStorage.setItem("id",JSON.stringify(n)),localStorage.setItem("token",JSON.stringify(s)),localStorage.setItem("name",JSON.stringify(i)),localStorage.setItem("refreshToken",JSON.stringify(d)),o({id:t.userId,token:t.token,name:t.name,refreshToken:t.refreshToken});var n,s,i,d}async function d(e){try{await(0,a.C8)(e),await i({email:e.email,password:e.password}),location.reload()}catch{const e=document.querySelector(".menu__text");e.innerHTML="Такая почта уже занята",e.style.color="red",e.style.fontSize="x-large"}}class c{get token(){return JSON.parse(localStorage.getItem("token"))}get id(){return JSON.parse(localStorage.getItem("id"))}get name(){return JSON.parse(localStorage.getItem("name"))}get refreshToken(){return JSON.parse(localStorage.getItem("refreshToken"))}}},802:(e,t,n)=>{n.d(t,{W:()=>d});var a=n(957),o=n(579),s=n(671),i=n(129);async function d(e,t,n){await(0,o.Um)(e,t,n),document.querySelector(`div[data-id="${t}"]`).remove()}!function(){const e=new URLSearchParams(document.location.search),t=e.get("group"),n=e.get("status");!function(e,t){const n=document.querySelectorAll(".text-group");t&&"studied"===t?(n[0].innerHTML="Изученные слова",document.querySelectorAll(".link__chapter").forEach((e=>e.href+="&status=studied"))):n[0].innerHTML="Сложные слова",e?(n[1].innerHTML=`Раздел ${e}`,document.querySelectorAll(".link__status").forEach((t=>t.href+=`&group=${e}`))):n[1].innerHTML="Раздел 1"}(t,n),async function(e){const t=new s.cU,n=await(0,i.rx)(t.id,t.token),o=document.querySelector(".list-textbook"),d=document.createElement("div");if(d.classList.add("container"),o.append(d),t.token&&n)for(let t=0;t<n.length;t++){const o=await(0,a.nn)(n[t].wordId);if(e.status===n[t].difficulty&&Number(e.group)===o.group){const t=document.createElement("div");t.classList.add("list-textbook__elem"),t.setAttribute("data-id",`${o.id}`),d.append(t);const n=document.createElement("img");n.classList.add("list-textbook__elem__img"),n.src=`${a.FH}${o.image}`,t.append(n);const s=document.createElement("div");s.classList.add("list-textbook__elem__words-container"),t.append(s);const i=document.createElement("div");i.classList.add("list-textbook__elem__word-container"),s.append(i);const c=document.createElement("div");c.classList.add("word-container__word"),c.innerHTML=`${o.word}`,i.append(c);const r=document.createElement("div");r.classList.add("word-container__transcription"),r.innerHTML=`${o.transcription}`,i.append(r);const l=document.createElementNS("http://www.w3.org/2000/svg","svg"),u=document.createElementNS("http://www.w3.org/2000/svg","use");l.classList.add("audio"),l.setAttribute("data-id",`${o.id}`),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","assets/ico/audio-mute.svg#Capa_1"),l.append(u),i.append(l);const m=document.createElement("div");m.classList.add("word-container__wordTranslate"),m.innerHTML=`${o.wordTranslate}`,i.append(m);const p=document.createElement("div");p.classList.add("list-textbook__elem__example"),s.append(p);const g=document.createElement("div");g.classList.add("example__text"),g.innerHTML=`${o.textExample}`,p.append(g);const f=document.createElement("div");f.classList.add("example__textTranslate"),f.innerHTML=`${o.textExampleTranslate}`,p.append(f);const h=document.createElement("div");h.classList.add("list-textbook__elem__meaning"),s.append(h);const w=document.createElement("div");w.classList.add("meaning__text"),w.innerHTML=`${o.textMeaning}`,h.append(w);const _=document.createElement("div");if(_.classList.add("meaning__textTranslate"),_.innerHTML=`${o.textMeaningTranslate}`,h.append(_),"hard"===e.status){const e=document.createElement("button");e.classList.add("cont-button"),e.classList.add("cont-button__remove-to-dictionary"),e.innerText="Убрать из сложных слов",t.append(e)}}}else o.innerText="Авторизируйтесь для просмотра и редактирования"}({group:`${t?Number(t)-1:"0"}`,status:`${n||"hard"}`})}()},129:(e,t,n)=>{n.d(t,{Xh:()=>c,eq:()=>l,nt:()=>d,oO:()=>u,of:()=>i,rx:()=>r});var a=n(579),o=n(957),s=n(671);function i(){const e=document.querySelectorAll(".list-textbook__elem");let t=0;for(let n=0;n<e.length;n++)(e[n].classList.contains("hard")||e[n].classList.contains("studied"))&&t++;const n=document.querySelector(".main"),a=document.querySelector(".number-page");t==e.length?(n.classList.add("studied-page"),a.classList.add("pagination-studied")):a.classList.contains("pagination-studied")&&n.classList.contains("studied-page")&&(n.classList.remove("studied-page"),a.classList.remove("pagination-studied"))}async function d(e,t,n){const o={difficulty:"hard",optional:{}};await(0,a.Y4)(e,t,n)?await(0,a.D4)({id:e,idWord:t,token:n,body:o}):await(0,a.nl)({id:e,idWord:t,token:n,body:o}),i()}async function c(e,t,n){const o={difficulty:"studied",optional:{}};await(0,a.Y4)(e,t,n)?await(0,a.D4)({id:e,idWord:t,token:n,body:o}):await(0,a.nl)({id:e,idWord:t,token:n,body:o}),i()}async function r(e,t){return e&&t?(0,a.k8)(e,t):null}async function l(e){const t=await(0,o.nn)(e),n=["audio","audioExample","audioMeaning"],a=document.querySelector(`svg[data-id="${e}"]`).firstChild;a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","assets/ico/audio-play.svg#Capa_1");const s=new Audio;s.src=`${o.FH}${t[n[0]]}`,s.autoplay=!0;let i=0;s.onended=function(){i++,i<n.length?(s.src=`${o.FH}${t[n[i]]}`,s.play()):a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","assets/ico/audio-mute.svg#Capa_1")}}function u(e){const t=new URLSearchParams(document.location.search);let n=t.get("page"),a=t.get("group");n||a||(n="1",a="1");const o=Number(n);let s;const i=`${document.location.origin}${document.location.pathname}`;"back-all"===e&&(s=1),"back"===e&&(s=o<=1?1:o-1),"forward"===e&&(s=o>=30?30:o+1),"forward-all"===e&&(s=30),window.location.href=`${i}?group=${a}&page=${s||1}`}!function(){const e=new URLSearchParams(document.location.search),t=e.get("page"),n=e.get("group");!function(e,t){document.querySelector(".text-group").innerText=e?`Раздел ${t}`:"Раздел 1",document.querySelector(".number-page").innerText=e||"1";const n=document.querySelector(".back-all"),a=document.querySelector(".back"),o=document.querySelector(".forward"),s=document.querySelector(".forward-all"),i=Number(e);1<i&&i<30&&(n.disabled=!1,a.disabled=!1,o.disabled=!1,s.disabled=!1),i<=1&&(n.disabled=!0,a.disabled=!0,o.disabled=!1,s.disabled=!1),i>=30&&(n.disabled=!1,a.disabled=!1,o.disabled=!0,s.disabled=!0)}(t,n);const a=document.querySelector(".link__audio-call"),d=document.querySelector(".link__sprint");let c;t&&n?(c={page:""+(Number(t)-1),group:""+(Number(n)-1)},a.href=`./audio-call.html?group=${n}&page=${t}`,d.href=`./sprint.html?group=${n}&page=${t}`):(c={page:"0",group:"0"},a.href="./audio-call.html?group=1&page=1",d.href="./sprint.html?group=1&page=1"),async function(e){const t=await(0,o.qz)(e),n=new s.cU,a=await r(n.id,n.token),d=document.querySelector(".list-textbook"),c=document.createElement("div");c.classList.add("container"),d.append(c);for(let e=0;e<t.length;e++){const s=document.createElement("div");s.classList.add("list-textbook__elem"),s.setAttribute("data-id",`${t[e].id}`),c.append(s);const i=document.createElement("img");i.classList.add("list-textbook__elem__img"),i.src=`${o.FH}${t[e].image}`,s.append(i);const d=document.createElement("div");d.classList.add("list-textbook__elem__words-container"),s.append(d);const r=document.createElement("div");r.classList.add("list-textbook__elem__word-container"),d.append(r);const l=document.createElement("div");l.classList.add("word-container__word"),l.innerText=`${t[e].word}`,r.append(l);const u=document.createElement("div");u.classList.add("word-container__transcription"),u.innerText=`${t[e].transcription}`,r.append(u);const m=document.createElementNS("http://www.w3.org/2000/svg","svg"),p=document.createElementNS("http://www.w3.org/2000/svg","use");m.classList.add("audio"),m.setAttribute("data-id",`${t[e].id}`),p.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","assets/ico/audio-mute.svg#Capa_1"),m.append(p),r.append(m);const g=document.createElement("div");g.classList.add("word-container__wordTranslate"),g.innerText=`${t[e].wordTranslate}`,r.append(g);const f=document.createElement("div");f.classList.add("list-textbook__elem__example"),d.append(f);const h=document.createElement("div");h.classList.add("example__text"),h.innerText=`${t[e].textExample}`,f.append(h);const w=document.createElement("div");w.classList.add("example__textTranslate"),w.innerText=`${t[e].textExampleTranslate}`,f.append(w);const _=document.createElement("div");_.classList.add("list-textbook__elem__meaning"),d.append(_);const b=document.createElement("div");b.classList.add("meaning__text"),b.innerText=`${t[e].textMeaning}`,_.append(b);const y=document.createElement("div");if(y.classList.add("meaning__textTranslate"),y.innerText=`${t[e].textMeaningTranslate}`,_.append(y),n.id){const n=document.createElement("div");n.classList.add("list-textbook__cont-button"),s.append(n);const o=document.createElement("button");o.classList.add("cont-button"),o.classList.add("cont-button__add"),o.innerText="Добавить в сложные слова",n.append(o);const i=document.createElement("button");i.classList.add("cont-button"),i.classList.add("cont-button__remove"),i.innerText="Убрать из сложных слов",i.disabled=!0,n.append(i);const d=document.createElement("button");if(d.classList.add("cont-button"),d.classList.add("cont-button__studied"),d.innerText="Изученно",n.append(d),!a)return;for(let n=0;n<a.length;n++)a[n].wordId===t[e].id&&("hard"===a[n].difficulty&&(s.classList.add("hard"),o.disabled=!0,i.disabled=!1),"studied"===a[n].difficulty&&(s.classList.add("studied"),o.disabled=!0,i.disabled=!0,d.disabled=!0))}}i()}(c)}()}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var s=t[a]={exports:{}};return e[a](s,s.exports,n),s.exports}n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=n(671),t=n(129),a=n(579),o=n(802);const s=new class{templateLogin(){return'\n    <div class="close"></div>\n    <h3 class="menu-heading">Войти</h3>\n    <div class="menu__text">\n      Войдите в свою учетную запись, используя адрес электронной почты и\n      пароль, указанные при регистрации.\n    </div>\n    <form class="form">\n      <label>\n        <h5>Email</h5>\n        <input type="email" name="email" required placeholder="Введите логин"/>\n      </label>\n      <label>\n        <h5>Password</h5>\n        <input type="text" name="password" minlength="8" maxlength="20" required placeholder="Введите пароль"/>\n      </label>\n      <button type="submit" class="sign__button btn btn-orange">Войти</button>\n      <div class="signIn">\n      У Вас нет аккаунта? <span>Зарегистрировать</span>\n      </div>\n    </form>\n    '}templateRegistration(){return'\n    <div class="close"></div>\n    <h3 class="menu-heading">Регистрация</h3>\n    <div class="menu__text">\n      Регистрация занимает меньше минуты, но дает вам полный контроль над учебой.\n    </div>\n    <form class="form" action="">\n      <label>\n        <h5>Login</h5>\n        <input type="text" name="login" required placeholder="Введите логин"/>\n      </label>\n      <label>\n        <h5>Password</h5>\n        <input type="text" name="pass" minlength="8" maxlength="20" required placeholder="Введите пароль"/>\n      </label>\n      <label>\n        <h5>Email</h5>\n        <input type="email" name="email" required placeholder="Введите емейл"/>\n      </label>\n      <button type="submit" class="registration__button btn btn-orange">Регистрация</button>\n      <div class="registration">\n      У вас уже есть аккаунт? <span>Войти</span>\n      </div>\n    </а>\n    </form>\n    '}};document.addEventListener("DOMContentLoaded",(async function(){const n=new e.cU;if(n.id){const t={id:n.id,token:n.token,name:n.name,refreshToken:n.refreshToken};(0,e.jL)(t)}document.body.addEventListener("click",(async function(n){const i=document.querySelector(".login-popUp"),d=document.querySelector(".login-popUp .menu"),c=n.target,r=/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/iu;if(!c.closest(".close")&&c.closest(".menu")||(i.style.transform="translateX(100%)"),c.closest(".account")&&(d.innerHTML=s.templateLogin(),i.style.transform="translateX(0%)"),c.closest(".signIn")?d.innerHTML=s.templateRegistration():c.closest(".registration")&&(d.innerHTML=s.templateLogin()),c.closest(".sign__button")){const t=document.querySelector('input[name="email"]').value,a=document.querySelector('input[name="password"]').value;if(r.test(t)&&a.length>=8){n.preventDefault();const o={email:t,password:a};await(0,e.BF)(o),location.reload()}}if(c.closest(".registration__button")){const t=document.querySelector('input[name="email"]').value,a=document.querySelector('input[name="login"]').value,o=document.querySelector('input[name="pass"]').value;if(r.test(t)&&o.length>8&&a){n.preventDefault();const s={name:a,email:t,password:o};(0,e.l9)(s)}}if(c.closest(".account__out")&&(0,e.ni)(),c.closest(".audio")){const e=c.dataset.id;(0,t.eq)(e)}if(c.closest(".back-all")){const e="back-all";(0,t.oO)(e)}if(c.closest(".back")){const e="back";(0,t.oO)(e)}if(c.closest(".forward")){const e="forward";(0,t.oO)(e)}if(c.closest(".forward-all")){const e="forward-all";(0,t.oO)(e)}if(c.closest(".cont-button__add")){const n=c.parentNode.parentNode,a=n.dataset.id;if(!n.classList.contains("hard")){n.classList.add("hard");const o=new e.cU;(0,t.nt)(o.id,a,o.token),c.disabled=!0,c.parentNode.childNodes[1].disabled=!1}}if(c.closest(".cont-button__remove")){const n=c.parentNode.parentNode;if(n.classList.contains("hard")){n.classList.remove("hard");const o=new e.cU,s=n.dataset.id;(0,a.Um)(o.id,s,o.token),(0,t.of)();const i=c.parentNode.childNodes[1],d=c.parentNode.childNodes[0];i.disabled=!0,d.disabled=!1}}if(c.closest(".cont-button__remove-to-dictionary")){const t=c.parentNode,n=new e.cU,a=t.dataset.id;(0,o.W)(n.id,a,n.token)}if(c.closest(".cont-button__studied")){const n=c.parentNode.parentNode,a=n.dataset.id;if(!n.classList.contains("studied")){n.classList.add("studied");const o=new e.cU;(0,t.Xh)(o.id,a,o.token)}const o=c.parentNode.childNodes[1],s=c.parentNode.childNodes[0];o.disabled=!0,s.disabled=!0,c.disabled=!0}}))}))})()})();